# Трейсинг

## Мотивация
Для отслеживания последовательностей выполнения методов в приложениях при запросе требуется внедрить трейсинг.
Трейсинг начинается с точки входа запроса в приложение: он запускается для запроса и имеет уникальный идентификатор, сгенерированный для этого запроса. 
По мере того как трафик переходит от сервиса к сервису, каждый сервис добавляет информацию (например, время поступления запроса в сервис и время,
затраченное на его обработку). По итогу получается список вызовов, представленных в виде дерева. 
По ним можно понять, где и чем оборвалась цепочка вызовов. Трейсинг помогает быстро находить причины медленной работы сервиса. 
Вместо просмотра всей цепочки вызовов, которую нужно к тому же раскрутить, разработчик может посмотреть, сколько, где и с какими параметрами прошёл вызов. 
У трейсинга как средства устранения неполадок есть дополнительные преимущества, поскольку любое исключение или ошибка обычно 
фиксируется вместе со всем контекстом запроса.

## Предлагаемое решение
Для использования трейсинга необходимо подключить платформу OpenTelemetry и систему Jaeger.
В приложения Shop, CRM, MES необходимо встроить sdk OTel, которое добавляет необходимые сигналы по мере распространения вызовов и отправляет их в приёмник (receivers), 
который передаёт обработчикам коллектора. Задача коллектора — обработать, отфильтровать и агрегировать телеметрию, 
а затем отправить её через экспортёры в хранилище телеметрии и средства визуализации.
Для визуализации трассировок в распределённых системах используется инструмент Jaeger, который содержит Jaeger-UI — 
веб-интерфейс для поиска и просмотров трейсов.

## Компромиссы
Трейсинг не принесет пользы в случаях, если проект небольшой и мало источников событий, по которым и так ясно, в чем заключается проблема.

## Аспекты безопасности
Доступ к данным трейсинга необходимо предоставлять только авторизованным пользователям и данные трейсинга не должны содержать персональные данные клиентов.
