# Логирование

## Мотивация
Для получения информации о состоянии системы в конкретный момент времени используется логирование.
Логи помогают в отладке приложения и в обнаружении ошибок.

Логи собираются с бекенд сервисов Shop, CRM, MES.

### Уровни логирования:     
Логи с уровнем INFO:        
- Запросы на создание, изменение, удаление заказа      
- Crud-запросы для статуса заказа    
- Crud-запросы с 3d-файлом модели       
- Запросы для расчета стоимости заказа

Логи с уровнем DEBUG:     
- Отправка и получение сообщений из брокера     
- Сообщения в процессе расчета 3d-модели    
- Подробные параметры при вызовах методов, требующих внимания, внутри приложений   

Логи с уровнем WARN:        
- Невалидные запросы        
- Некритические ошибки в процессе обработки запросов

Логи с уровнем ERROR:
- Запросы, закончившиеся ошибками  
- Невалидные запросы  
- Внутренние ошибки сервисов  
- Некорректные сообщения от брокера    
- Запросы, превышающие заданные порог времени для их обработки   

## Предлагаемое решение и технологии 
Систему логирования предлагается сделать на следующих технологиях, основанных на Elastic Stack:      
- Logback - инструмент для сбора логов внутри приложений      
- FileBeat - для агрегации и накопления логов 
- Logstash - инструмент для отправки накопленных логов  
- ElasticSearch - используется для хранения логов    
- Kibana - сервис для визуализации логов

## Аспекты безопасности
Лог-сообщения не должны содержать конфиденциальнцю информацию, персональные данные и данные для авторизации пользователей.      
Доступ к чтению и анализу логов должны иметь авторизованные пользователи, и все взаимодействия должны происходить по протоколам, использующих шифрование.       

## Политика хранения логов      
- логи с уровнем info и debug хранятся 1-3 месяца
- логи с уровнем warn хранятся до достижения предельного размера хранилища, предоставленного для них       
- логи с уровнем error удаляются администраторов      

## Алертинг
Система логирования настраивается на оповещение администратора при появлении error логов и при превышении порогового времени для их обработки.  
